<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <title>Create an account</title>
</head>

<body>
<br/><br/>
<div class="container">
    <form class="form"
          method="POST"
          th:object="${user}"
          th:action="@{/auth/register_new_user}">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <div class="d-grid gap-2 col-4 mx-auto">
            <th:block th:each="msg : ${messages}">
                <h6 class="text-danger" th:text="${msg}"></h6>
            </th:block>
            <br/>
            <h2 class="form-heading text-center"> Заполните поля для регистрации</h2>
            <div class="form-group">
                <input type="text" th:field="*{username}"
                       class="form-control"
                       placeholder="Логин"
                       autofocus="true">
                <span class="text-danger"
                      th:if="${#fields.hasErrors('username')}"
                      th:errors="*{username}"></span>
            </div>
            <div class="form-group">
                <input type="text"
                       th:field="*{firstname}"
                       class="form-control"
                       placeholder="Имя"
                       autofocus="true">
                <span class="text-warning"
                      th:if="${#fields.hasErrors('firstname')}"
                      th:errors="*{firstname}"></span>
            </div>
            <div class="form-group">
                <input type="text"
                       th:field="*{lastname}"
                       class="form-control"
                       placeholder="Фамилия"
                       autofocus="true">
                <span class="text-warning"
                      th:if="${#fields.hasErrors('lastname')}"
                      th:errors="*{lastname}"></span>
            </div>
            <div class="form-group">
                <input type="email"
                       th:field="*{email}"
                       class="form-control"
                       placeholder="email"
                       autofocus="true">
                <span class="text-warning"
                      th:if="${#fields.hasErrors('email')}"
                      th:errors="*{email}"></span>
            </div>
            <div class="form-group">
                <input type="number"
                       th:field="*{age}"
                       class="form-control"
                       placeholder="Возраст"
                       autofocus="true">
                <span class="text-warning"
                      th:if="${#fields.hasErrors('age')}"
                      th:errors="*{age}"></span>
            </div>

            <label><h6 class="form-heading text-center">Роль:
            <th:block th:each="role: ${roles}">
                <input class="form-check-input"
                       type="checkbox"
                       th:field="*{roles}"
                       th:text="${' '+role.name.substring(5)+' '}"
                       th:value="${role.id}"/>
            </th:block>
        </h6>
        </label>

            <div class="form-group">
                <input type="password"
                       th:field="*{password}"
                       class="form-control"
                       placeholder="Пароль">
                <span class="text-danger"
                      th:if="${#fields.hasErrors('password')}"
                      th:errors="*{password}"></span>
            </div>

            <div class="form-group">
                <input type="password"
                       th:field="*{passwordConfirm}"
                       class="form-control"
                       placeholder="Подтвердите введенный пароль">
                <span class="text-danger"
                      th:if="${#fields.hasErrors('passwordConfirm')}"
                      th:errors="*{passwordConfirm}"></span>
            </div>

            <button class="btn btn-lg btn-primary btn-block"
                    type="submit">Зарегистрировать</button>
            <br/>
            <a class="btn btn-sm btn-secondary btn-block"
               th:href="@{/}"
               target="_self">На главную</a>
        </div>
    </form>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>